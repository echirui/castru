# Data Model: Castnow Feature Integration

## Entities

### `CastDevice` (Existing, Extended)
Represents a physical Chromecast device found on the network.
- `ip`: `IpAddr`
- `port`: `u16`
- `friendly_name`: `String`
- `model_name`: `String`
- `uuid`: `String`

### `MediaSource`
Encapsulates a playable item.
- **Variants**:
  - `LocalFile { path: PathBuf, mime_type: String }`
  - `Url { url: String, mime_type: Option<String> }`

### `Playlist`
An ordered collection of media items.
- `items`: `Vec<MediaSource>`
- `current_index`: `usize`
- `repeat`: `bool`

### `PlaybackStatus`
The current state of the media player on the Chromecast.
- `state`: `Idle`, `Playing`, `Paused`, `Buffering`
- `current_time`: `f64` (seconds)
- `duration`: `f64` (seconds)
- `volume`: `f64` (0.0 to 1.0)
- `muted`: `bool`

### `TuiCommand`
Commands generated by user input.
- `TogglePause`
- `Stop`
- `SeekRelative(f64)` (seconds)
- `Next`
- `Previous`
- `VolumeUp`
- `VolumeDown`

## Relationships
- `PlaybackSession` owns a `CastDevice` and a `Playlist`.
- `StreamServer` serves a single `MediaSource` at a time (if it's a `LocalFile`).
- `Tui` broadcasts `TuiCommand` to the `PlaybackSession`.
